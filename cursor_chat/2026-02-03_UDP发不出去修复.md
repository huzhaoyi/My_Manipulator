# 2026-02-03 UDP 发不出去修复

## 现象
整个系统能编译，但 UDP 发不出去。

## 原因
`m5_hardware` 通信线程里，**只有**在 `has_received_feedback_.load()` 为 true 时才按周期调用 `send_command()`。也就是说：必须先收到机械臂/仿真器的一次 UDP 反馈，才会开始往对方发命令。

若对方不会先发（或网络/端口未先通），就永远收不到反馈 → 永远不发送 → UDP 看起来“发不出去”。

## 修改
**文件**: `src/m5_hardware/src/m5_hardware_interface.cpp`

- **原逻辑**：`should_send = has_received_feedback_.load() && (now - last_command_time >= command_interval)`
- **现逻辑**：一旦 `connected_` 为 true，就按固定周期发送，不再依赖是否已收过反馈：
  - `should_send = (now - last_command_time >= command_interval)`

这样连接建立后就会按 50Hz 周期向 `robot_ip_:robot_port_` 发送命令，对方可以先收到再回包，避免“先有反馈才发”的死锁。

## 验证
- `colcon build --packages-select m5_hardware` 通过。
