/**:
  ros__parameters:
    cable:
      name: "cable_1"
      diameter: 0.050          # m  缆绳直径（47mm）
      length: 0.020             # m  用于碰撞近似的长度（可以只取局部一段）
      frame_id: "world"        # 缆绳pose所在坐标系（如果你的视觉输出不同就填视觉frame）
      shape: "cylinder"        # cylinder 或 capsule（如果你实现）
      center_offset_z: 0.0     # m  cable_pose到圆柱中心的Z偏移（默认0.0表示cable_pose是中心，如需从底部推中心可设为length*0.5）

    grasp:
      approach_offset_z: 0.10  # m  预抓取点：目标上方10cm
      descend_distance: 0.08   # m  下压距离（用于cartesian path）
      lift_distance: 0.06      # m  抬起确认高度
      max_pos_error: 0.01      # m  抓取允许位置误差
      use_cartesian: true
      eef_step: 0.005          # m  cartesian步长
      jump_threshold: 1.0      # 跳跃阈值（0表示关闭检查，建议使用1.0或2.0以确保安全）
      
      # MoveIt规划参数
      planning_time: 15.0      # s  默认规划时间
      num_planning_attempts: 30 # 规划尝试次数
      max_velocity_scaling: 0.9  # 最大速度缩放因子
      max_acceleration_scaling: 0.9  # 最大加速度缩放因子
      goal_position_tolerance: 0.01  # m  目标位置容差
      goal_orientation_tolerance: 0.5  # rad  目标姿态容差
      fallback_planning_time: 2.0  # s  fallback策略的规划时间
      
      # yaw调整参数（用于xyz+yaw抓取模式）
      yaw_offset: 0.0  # rad  yaw偏移量，用于微调夹爪方向
      yaw_flip: false  # bool  是否翻转yaw 180度（遇到方向反了时使用）
      grasp_yaw_add: 0.0  # rad  线缆切向→夹持方向偏移：yaw=0度时，orientation的Yaw分量=0度，期望joint 4=90度
      orientation_yaw_offset: -1.5708  # rad  orientation的Yaw分量偏移（-90度）：用于调整Yaw=0度时joint 4的角度，使得joint 4=-90度
      z_clearance: 0.002  # m  抓取高度安全余量（默认2mm），避免下压过猛
      
      # yaw合法性检查参数
      yaw_validation_enabled: true  # 是否启用yaw合法性检查（检查yaw在特定z高度下是否IK可解）
      yaw_tolerance: 0.0873  # rad  yaw搜索容差（默认±5°，约0.0873 rad）
      yaw_search_step: 0.0175  # rad  yaw搜索步长（默认1°，约0.0175 rad）
      
      # Joint4-yaw映射优化参数
      joint4_yaw_search_enabled: false  # 禁用Joint4-yaw搜索（Joint4 ≠ 末端yaw，不应进行对比）
      joint4_yaw_search_range: 3.1416  # rad  Joint4-yaw搜索范围（默认±180度，约3.1416 rad）
      joint4_yaw_search_step: 0.0873  # rad  Joint4-yaw搜索步长（默认5度，约0.0873 rad）
      
      # yaw候选搜索参数（用于仅xyz输入）
      yaw_candidate_search_enabled: true  # 是否启用yaw候选搜索
      yaw_candidate_center: 0.0  # rad  候选搜索中心yaw（仅xyz输入时使用）
      yaw_candidate_range: 3.1416  # rad  搜索范围（±180°）
      yaw_candidate_step: 0.2618  # rad  搜索步长（15°，约0.2618 rad）
      
      # 地面安全参数
      ground_height: 0.0  # m  地面高度（如果为0，则根据基座位置自动计算）
      ground_offset_below_base: -0.05  # m  地面在基座下方的偏移（-5cm，基座下方5cm）
      camera_error_margin: 0.005  # m  相机标定误差余量（5mm）
      min_ground_clearance: 0.010  # m  最小离地安全距离（10mm）
      add_ground_plane: false  # 是否添加地面碰撞对象
      
      # 下压距离限制
      max_cartesian_descend_distance: 0.15  # m  单次笛卡尔下压最大距离（15cm）
      
      # 全零状态预运动参数（避免从奇异点附近规划）
      auto_move_to_ready: true  # 是否自动移动到预备位置
      ready_joint1: 0.0         # rad  预备位置Joint1
      ready_joint2: -0.5        # rad  预备位置Joint2（约-30度）
      ready_joint3: -0.5        # rad  预备位置Joint3（约-30度）
      ready_joint4: 0.0         # rad  预备位置Joint4
      near_zero_threshold: 0.1  # rad  全零状态判断阈值
      
      # 状态回滚参数
      enable_recovery: true  # 是否启用执行失败后的状态回滚
      recovery_timeout: 5.0  # s  回滚操作的超时时间
      
      # TCP偏移补偿参数（LinkGG到夹爪中心的偏移，在EEF frame中）
      tcp_offset_x: 0.0  # m  TCP偏移X（LinkGG→夹爪中心）
      tcp_offset_y: -0.024  # m  TCP偏移Y（LinkGG→夹爪中心）
      tcp_offset_z: -0.0086  # m  TCP偏移Z（LinkGG→夹爪中心）
      
      # IK和状态检查参数
      ik_timeout: 0.1          # s  IK求解超时时间
      state_check_timeout: 1.0  # s  状态检查超时时间
      state_check_interval: 0.1  # s  状态检查间隔
      
      # 启动等待时间
      robot_state_publisher_wait: 2.0  # s  等待robot_state_publisher启动的时间
      executor_startup_wait: 0.5       # s  executor启动后的等待时间
      segment_execution_wait: 0.5      # s  分段执行后的等待时间（确保状态稳定，从0.1s增加到0.5s，避免状态未稳定）
      state_sync_wait: 0.1             # s  执行前状态同步等待时间（等待current_state更新，经验值0.1s）
      
      # 机械臂控制频率
      control_frequency: 20.0          # Hz  机械臂控制频率（发送命令频率）
      read_frequency: 20.0             # Hz  机械臂状态读取频率
      main_loop_frequency: 20.0        # Hz  main循环频率

    place:
      approach_offset_z: 0.10  # m  预放置点：目标上方10cm
      descend_distance: 0.08   # m  下压距离（用于放置）
      retreat_distance: 0.06   # m  后退距离（放置后向上移动）
      max_pos_error: 0.01      # m  放置允许位置误差
      
      # MoveIt规划参数（继承grasp的参数，可单独配置）
      planning_time: 15.0      # s  默认规划时间
      num_planning_attempts: 30 # 规划尝试次数
      max_velocity_scaling: 0.9  # 最大速度缩放因子
      max_acceleration_scaling: 0.9  # 最大加速度缩放因子
      goal_position_tolerance: 0.01  # m  目标位置容差
      goal_orientation_tolerance: 0.5  # rad  目标姿态容差

    trajectory:
      # 笛卡尔空间直线插补配置
      use_linear_interpolation: true  # 是否使用精确直线插补（使用TrajectoryPlanner）
      linear_velocity: 0.1            # m/s  直线插补的默认速度
      linear_min_duration: 1.0        # s  线性插补最小持续时间
      linear_step_scale: 0.5          # 线性插补时步长缩放因子（相对于eef_step）
      
      # 笛卡尔路径规划参数
      cartesian_timeout: 3.0          # s  笛卡尔路径计算默认超时时间（向后兼容）
      cartesian_timeout_descend: 5.0  # s  下压专用超时时间（默认5.0秒，下压需要更长时间）
      cartesian_timeout_lift: 3.0     # s  抬起专用超时时间（默认3.0秒）
      cartesian_descend_threshold: 0.95  # descend（下压）路径成功率阈值
      cartesian_lift_threshold: 0.90     # lift（抬起）路径成功率阈值
      cartesian_retry_on_timeout: true  # 超时后是否重试（减少waypoints后重试）
      
      # 自适应分段参数
      adaptive_segments: true         # 是否启用自适应分段（根据距离动态调整）
      min_segments: 2                 # 最小分段数（默认2，生成3个waypoints）
      max_segments: 4                 # 最大分段数（默认4，生成5个waypoints）
      
      # 关节空间多项式插值配置
      use_polynomial_interpolation: true  # 是否启用多项式插值轨迹规划
      polynomial_type: "cubic"             # "cubic" 或 "quintic"
      polynomial_duration: 2.0            # s  多项式轨迹持续时间
      polynomial_dt: 0.01                 # s  多项式轨迹时间步长
      
      # B样条曲线轨迹规划配置
      use_bspline: true        # 是否启用B样条曲线轨迹规划
      bspline_degree: 3         # B样条阶数（3或4）
      bspline_duration: 3.0     # s  B样条轨迹持续时间
      bspline_dt: 0.01         # s  B样条轨迹时间步长

    gripper:
      mode: "position"         # 仅支持位置控制（不支持力控）
      open_width: 0.030        # m  张开宽度（两指之间）
      close_width: 0.010       # m  目标闭合宽度（抓细缆绳要小）
      close_extra: 0.002       # m  额外压紧量（避免夹不住）
      hold_time_ms: 200        # ms  闭合后保持一下
      
      # 夹爪角度映射参数
      angle_min: 1.01          # rad  闭合时的关节角度（对应axis5=0°）
      angle_max: -1.01         # rad  张开时的关节角度（对应axis5=-1100°）
      width_min: 0.0           # m   最小宽度（完全闭合）

    scene:
      add_collision_object: true
      allow_touch_links: ["LinkGG", "LinkGL", "LinkGR"]  # 允许接触的link
      
    workspace:
      # URDF机械臂参数（用于工作空间检查）
      base_height: 0.141       # m  Joint1在base_link上的高度
      link2_length: 0.264      # m  Joint2到Joint3的距离
      link3_length: 0.143      # m  Joint3到Joint4的距离（Z方向）
      link4_to_eef: 0.187      # m  Joint4到LinkGG的距离
      
      # 工作空间检查参数
      reach_radius_margin: 1.2  # 最大伸展半径的余量系数（20%）
      max_height_offset: 0.9     # m  最大高度偏移（base_height + offset）
      min_height_offset: -0.3   # m  最小高度偏移（base_height + offset）
      
      # 安全区域（高成功率区域）
      safe_x_min: 0.20
      safe_x_max: 0.35
      safe_y_min: -0.15
      safe_y_max: 0.15
      safe_z_min: 0.25
      safe_z_max: 0.35
      
      # 中等成功率区域
      medium_x_min: 0.15
      medium_x_max: 0.45
      medium_y_min: -0.20
      medium_y_max: 0.20
      medium_z_min: 0.20
      medium_z_max: 0.40
      
    tolerance:
      # 浮点数比较阈值
      orientation_epsilon: 1e-6  # 四元数比较阈值
